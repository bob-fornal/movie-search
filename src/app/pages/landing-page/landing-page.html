<div class="page-wrapper">
  <div class="page-header">
    <img class="banner" src="/banner.webp" alt="Bob Fornal's Movie Search" />
  </div>

  <div class="page-content">
  <div class="filter">
    <div class="title">Genre Filter</div>
      @if (selectedGenre !== null) {
        <div class="clear-button">
          <mat-icon>keyboard_arrow_left</mat-icon>
          <button matButton class="link-button" (click)="clearFilterItem()">Clear</button>
        </div>
      }
      @for (item of genre.data; track item.id;) {
        <div class="filter-item" (click)="toggleFilterItem(item)">
          <label
            class="filter-item-checkbox"
            [class.selected]="isSelected(item)"
            [class.disabled]="isDisabled(item)"
          >
            <input type="checkbox" style="display: none;">
            @if (isSelected(item)) {
              <mat-icon class="material-symbols-filled mat-ligature-font">check_box</mat-icon>
            } @else {
              <mat-icon>check_box_outline_blank</mat-icon>
            }
          </label>
           <span
            class="filter-item-label"
            [class.selected]="isSelected(item)"
            [class.disabled]="isDisabled(item)"
          >
            {{ item.title }} ({{ item.movies.length }})
          </span>
        </div>
      }
      @if (genre.pages.length < genre.totalPages) {
        <div class="see-more-button">
          <mat-icon>keyboard_arrow_down</mat-icon>
          <button matButton class="link-button" (click)="loadMoreGenre()">See more</button>
        </div>
      }
    </div>
    <div class="content">
      <div class="movie-selection">
        <div class="selection">
          Page {{ 1 }} of {{ movies.totalPages }}
        </div>
        <div class="movie-card-wrapper">
          <div class="movie-cards">
            @for (movie of movies.data; track movie.id) {
              <div
                class="movie-card"
                [class.selected]="movie.id === selectedMovie?.id"
                (click)="selectMovie(movie)"
              >
                {{ movie.title }}
              </div>
            }
          </div>
        </div>
      </div>

      <div class="movie-information">
        @if (selectedMovie === null) {
          <div>No movie selected.</div>
        } @else {
          <img class="poster" [src]="getMovieAvatar(selectedMovie)" [alt]="selectedMovie.title" />

          <div class="movie-data">
            {{ selectedMovie?.title }}
          </div>
        }
      </div>
    </div>

  </div>
</div>